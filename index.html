<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset=utf-8>
		<title>SikoreNightTheater</title>
		<h1>SikoreNightTheater</h1>
	</head>

	<body onLoad="getDuration()">
		<video id="video" width="400" height="300">
			<source src="video.mp4">
			<source src="video.ogv">
			<source src="video.webm">
		</video>

		<div style="width:500px; background-color:#333333; color:#ffffff;">
		<!--
			<input type="button" value="再生" onClick="playVideo()">
			<input type="button" value="一時停止" onClick="pauseVideo()">
		-->
			<input type="button" value="音量↑" onClick="upVolume()">
			<input type="button" value="音量↓" onClick="downVolume()"><br>
			<h2>hold A, S, D, F, Space, H, M, O</h2>
			
		
			現在（秒）：<span id="ichi">0</span><br>
			全体（秒）：<span id="nagasa"></span><br>
			<span id="kanryou"></span>
		</div>

		<script type="text/javascript">
			var v = document.getElementById("video");
			var aFlag = false;
			var hFlag = false;
			var dFlag = false;
			var fFlag = false;
			var sFlag = false;
			var mFlag = false;
			var oFlag = false;
			var spaFlag = false;

			document.addEventListener("keydown", keyDownFun);
			document.addEventListener("keyup", keyUpFun);
			setInterval(playVideo, 1000/10);

			
			function keyDownFun(e){
				console.log(e.keyCode);
		
				if(e.keyCode == 65 ){
					aFlag = true;
				}

				if(e.keyCode == 83 ){
					sFlag = true;
				}

				if(e.keyCode == 72 ){
					hFlag = true;
				}

				if(e.keyCode == 68 ){
					dFlag = true;
				}

				if(e.keyCode == 70 ){
					fFlag = true;
				}

				if(e.keyCode == 77 ){
					mFlag = true;
				}

				if(e.keyCode == 79 ){
					oFlag = true;
				}

				if(e.keyCode == 32 ){
					spaFlag = true;
				}		
				
			}

			function keyUpFun(e){
				console.log("up" + e.keyCode);
				
				if(e.keyCode == 65 ){
					aFlag = false;
				}

				if(e.keyCode == 83 ){
					sFlag = false;
				}

				if(e.keyCode == 72 ){
					hFlag = false;
				}

				if(e.keyCode == 68 ){
					dFlag = false;
				}

				if(e.keyCode == 70 ){
					fFlag = false;
				}

				if(e.keyCode == 77 ){
					mFlag = false;
				}

				if(e.keyCode == 79 ){
					oFlag = false;
				}

				if(e.keyCode == 32 ){
					spaFlag = false;
				}
				
			}
			

			function getDuration() {
				//動画の長さ（秒）を表示
				document.getElementById("nagasa").innerHTML = v.duration;
			}

			function playVideo(){
				if(aFlag && sFlag && hFlag && dFlag && fFlag && mFlag && oFlag && spaFlag){
					//再生完了の表示をクリア
					document.getElementById("kanryou").innerHTML = "";

					//動画を再生
					v.play();

					//現在の再生位置（秒）を表示
					v.addEventListener("timeupdate", function(){
						document.getElementById("ichi").innerHTML = v.currentTime;
					}, false);
					//再生完了を知らせる
					v.addEventListener("ended", function(){
						document.getElementById("kanryou").innerHTML = "動画の再生が完了しました。";
					}, false);
				}
				else v.pause();
			}
/*
			function pauseVideo() {
					//動画を一時停止
					v.pause();
			}
*/
			function upVolume() {
				//音量を上げる
				v.volume = v.volume + 0.25;
			}

			function downVolume() {
				//音量を下げる
				v.volume = v.volume - 0.25;
			}
		</script>
	</body> 
</html>